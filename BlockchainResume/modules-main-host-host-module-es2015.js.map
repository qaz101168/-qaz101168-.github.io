{"version":3,"sources":["webpack:///./src/app/modules/main/host/host.component.html","webpack:///./src/app/modules/main/host/host-routing.module.ts","webpack:///./src/app/modules/main/host/host.component.scss","webpack:///./src/app/modules/main/host/host.component.ts","webpack:///./src/app/modules/main/host/host.module.ts"],"names":[],"mappings":"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","file":"modules-main-host-host-module-es2015.js","sourcesContent":["module.exports = \"<div class=\\\"container my-3\\\">\\r\\n    <div class=\\\"jumbotron jumbotron-fluid\\\">\\r\\n        <div class=\\\"container\\\">\\r\\n            <h1 class=\\\"display-4\\\">租借人專區</h1>\\r\\n            <p class=\\\"lead\\\">提供租借人相關基本聯絡資訊的頁面</p>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"container\\\">\\r\\n    <div class=\\\"my-3\\\" *ngIf=\\\"!isConfirmed && !isError\\\">\\r\\n        <form\\r\\n            [formGroup]=\\\"profileForm\\\"\\r\\n            (ngSubmit)=\\\"updateProfile(profileForm.value)\\\"\\r\\n        >\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"contract\\\">書籍交易位址</label>\\r\\n                <input\\r\\n                    type=\\\"text\\\"\\r\\n                    class=\\\"form-control\\\"\\r\\n                    id=\\\"contract\\\"\\r\\n                    placeholder=\\\"輸入交易位址\\\"\\r\\n                    [formControlName]=\\\"'contract'\\\"\\r\\n                >\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                    <label for=\\\"autobiography\\\">租借人名稱</label>\\r\\n                    <textarea\\r\\n                        class=\\\"form-control\\\"\\r\\n                        id=\\\"autobiography\\\"\\r\\n                        placeholder=\\\"輸入名稱\\\"\\r\\n                        rows=\\\"1\\\"\\r\\n                        [formControlName]=\\\"'autobiography'\\\"\\r\\n                    ></textarea>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"contact\\\">聯絡方式</label>\\r\\n                <input\\r\\n                    type=\\\"text\\\"\\r\\n                    class=\\\"form-control\\\"\\r\\n                    id=\\\"contact\\\"\\r\\n                    placeholder=\\\"輸入聯絡方式\\\"\\r\\n                    [formControlName]=\\\"'contact'\\\"\\r\\n                >\\r\\n            </div>\\r\\n            \\r\\n            \\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-info btn-circle\\\" (click)=\\\"addSkillField()\\\">+</button>\\r\\n            <div class=\\\"text-right\\\">\\r\\n                <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" >新增</button>\\r\\n            </div>\\r\\n        </form>\\r\\n    </div>\\r\\n<div class=\\\"my-3\\\" *ngIf=\\\"isConfirmed\\\">\\r\\n    <div class=\\\"alert alert-success alert-dismissible fade show\\\" role=\\\"alert\\\">\\r\\n        <strong>更新完成</strong>\\r\\n        <button type=\\\"button\\\" class=\\\"close\\\" (click)=\\\"resetConfirmState()\\\">\\r\\n          <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"my-3\\\" *ngIf=\\\"isError\\\">\\r\\n    <div class=\\\"alert alert-danger alert-dismissible fade show\\\" role=\\\"alert\\\">\\r\\n        <strong>發生錯誤</strong> {{ errorMessage }}\\r\\n        <button type=\\\"button\\\" class=\\\"close\\\" (click)=\\\"resetErrorState()\\\">\\r\\n          <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n</div>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { HostComponent } from './host.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: HostComponent }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HostRoutingModule { }\r\n","module.exports = \".btn-circle {\\n  width: 30px;\\n  height: 30px;\\n  padding: 6px 0px;\\n  border-radius: 15px;\\n  text-align: center;\\n  font-size: 12px;\\n  line-height: 1.42857;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9tYWluL2hvc3QvQzpcXFVzZXJzXFx1c2VyXFxEZXNrdG9wXFxCbG9ja2NoYWluUmVzdW1lL3NyY1xcYXBwXFxtb2R1bGVzXFxtYWluXFxob3N0XFxob3N0LmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9tb2R1bGVzL21haW4vaG9zdC9ob3N0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0Esb0JBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9ob3N0L2hvc3QuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnRuLWNpcmNsZSB7XHJcbiAgICB3aWR0aDogMzBweDtcclxuICAgIGhlaWdodDogMzBweDtcclxuICAgIHBhZGRpbmc6IDZweCAwcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxNXB4O1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgbGluZS1oZWlnaHQ6IDEuNDI4NTc7XHJcbn1cclxuIiwiLmJ0bi1jaXJjbGUge1xuICB3aWR0aDogMzBweDtcbiAgaGVpZ2h0OiAzMHB4O1xuICBwYWRkaW5nOiA2cHggMHB4O1xuICBib3JkZXItcmFkaXVzOiAxNXB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgbGluZS1oZWlnaHQ6IDEuNDI4NTc7XG59Il19 */\"","import { Component, Injector } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators, FormArray } from '@angular/forms';\r\nimport { ComponentBase } from 'src/app/base/component.base';\r\nimport { from, forkJoin } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'app-host',\r\n    templateUrl: './host.component.html',\r\n    styleUrls: ['./host.component.scss']\r\n})\r\nexport class HostComponent extends ComponentBase {\r\n    public profileForm: FormGroup;\r\n\r\n    constructor(\r\n        private injector: Injector,\r\n        private formBuilder: FormBuilder\r\n    ) {\r\n        super(injector);\r\n        this.profileForm = this.formBuilder.group({\r\n            contract: ['', [Validators.required, this.addressValidator]],\r\n            contact: ['', [Validators.required]],\r\n            autobiography: ['', [Validators.required]],\r\n            skills: this.formBuilder.array([this.createSkillFields()])\r\n        });\r\n    }\r\n\r\n    public updateProfile(data: any): void {\r\n        this.isPending = true;\r\n        this.setFormDisabled(this.profileForm);\r\n        const resume = this.providerSvc.getResume(data.contract);\r\n        const request = [];\r\n        request.push(\r\n            from(resume.methods.setContact(data.contact).send({ from: this.providerSvc.defaultAccount })),\r\n            from(resume.methods.setAutobiography(data.autobiography).send({ from: this.providerSvc.defaultAccount }))\r\n        );\r\n        for (const skill of data.skills) {\r\n            request.push(from(resume.methods.setSkill(skill.class, skill.name).send({ from: this.providerSvc.defaultAccount })));\r\n        }\r\n        forkJoin(request).pipe(take(1)).subscribe(\r\n            res => {\r\n                this.transactionConfirmed();\r\n                this.profileForm.reset();\r\n                this.setFormDisabled(this.profileForm, false);\r\n            },\r\n            err => {\r\n                this.transactionError(err.message);\r\n                this.profileForm.reset();\r\n                this.setFormDisabled(this.profileForm, false);\r\n            }\r\n        );\r\n    }\r\n\r\n    public addSkillField(): void {\r\n        const skills = this.profileForm.controls.skills as FormArray;\r\n        skills.push(this.createSkillFields());\r\n    }\r\n\r\n    public removeSkillField(index: number) {\r\n        const skills = this.profileForm.controls.skills as FormArray;\r\n        skills.removeAt(index);\r\n    }\r\n\r\n    private createSkillFields(): FormGroup {\r\n        return this.formBuilder.group({\r\n            class: ['', [Validators.required]],\r\n            name: ['', [Validators.required]]\r\n        });\r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { HostRoutingModule } from './host-routing.module';\r\nimport { HostComponent } from './host.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        HostComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        HostRoutingModule\r\n    ]\r\n})\r\nexport class HostModule { }\r\n"],"sourceRoot":""}