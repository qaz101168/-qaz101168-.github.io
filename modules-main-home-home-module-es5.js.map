{"version":3,"sources":["webpack:///./src/app/modules/main/home/home.component.html","webpack:///./src/app/modules/main/home/home-routing.module.ts","webpack:///./src/app/modules/main/home/home.component.scss","webpack:///./src/app/modules/main/home/home.component.ts","webpack:///./src/app/modules/main/home/home.module.ts"],"names":[],"mappings":"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","file":"modules-main-home-home-module-es5.js","sourcesContent":["module.exports = \"<div class=\\\"container my-3\\\">\\r\\n    <form\\r\\n        [formGroup]=\\\"contractForm\\\"\\r\\n        (ngSubmit)=\\\"getProfile(contractForm.value.contract)\\\"\\r\\n    >\\r\\n        <div class=\\\"input-group mb-2 mr-sm-2\\\">\\r\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"輸入交易位址\\\" [formControlName]=\\\"'contract'\\\">\\r\\n            <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" [disabled]=\\\"contractForm.invalid\\\">查詢</button>\\r\\n        </div>\\r\\n    </form>\\r\\n    <div class=\\\"card\\\" *ngIf=\\\"loaded && profile\\\">\\r\\n        <div class=\\\"card-body\\\">\\r\\n            <h2 class=\\\"card-title\\\">Book Name:{{ profile.name }}</h2>\\r\\n        </div>\\r\\n        \\r\\n        <div class=\\\"card-body\\\">\\r\\n            <h3>租借人名稱</h3>\\r\\n            <p><b>{{ profile.autobiography }}</b></p>\\r\\n            <hr>\\r\\n        </div>\\r\\n\\r\\n        <ul class=\\\"list-group list-group-flush\\\">\\r\\n                <li class=\\\"list-group-item\\\"><b>租借天數：</b>{{ profile.age }}</li>\\r\\n                <li class=\\\"list-group-item\\\"><b>聯絡電話：</b>{{ profile.contact }}</li>\\r\\n                <li class=\\\"list-group-item\\\"><b>租借人帳戶：</b>{{ profile.account }}</li>\\r\\n                <br>\\r\\n            </ul>\\r\\n        \\r\\n        <div class=\\\"card-body\\\">\\r\\n            <h3>販售資訊</h3>  \\r\\n            <hr>\\r\\n            \\r\\n        </div>\\r\\n        <ul class=\\\"list-group list-group-flush\\\" *ngFor=\\\"let edu of profile.educations.items\\\">\\r\\n            <li class=\\\"list-group-item\\\"><b>廠商名稱:：</b>{{ edu.schoolName }}</li>\\r\\n            <li class=\\\"list-group-item\\\"><b>販售價格：</b>{{ edu.major }}</li>\\r\\n            \\r\\n        </ul>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { HomeComponent } from './home.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: HomeComponent }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HomeRoutingModule { }\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvbWFpbi9ob21lL2hvbWUuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, Injector } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { switchMap, take } from 'rxjs/operators';\r\nimport { forkJoin } from 'rxjs';\r\nimport { ComponentBase } from 'src/app/base/component.base';\r\nimport { ProfileModel } from 'src/app/types';\r\n\r\n@Component({\r\n    selector: 'app-home',\r\n    templateUrl: './home.component.html',\r\n    styleUrls: ['./home.component.scss']\r\n})\r\nexport class HomeComponent extends ComponentBase {\r\n    public contractForm: FormGroup;\r\n    public profile: ProfileModel = null;\r\n    public skills = null;\r\n\r\n    public loaded = false;\r\n\r\n    constructor(\r\n        private injector: Injector,\r\n        private formBuilder: FormBuilder\r\n    ) {\r\n        super(injector);\r\n        this.contractForm = this.formBuilder.group({\r\n            contract: ['', [Validators.required, this.addressValidator]]\r\n        });\r\n    }\r\n\r\n    public getProfile(contract: string): void {\r\n        const resume = this.providerSvc.getResume(contract);\r\n        const countReq = [];\r\n\r\n        this.loaded = true;\r\n        this.profile = new ProfileModel(resume);\r\n\r\n        countReq.push(this.providerSvc.executeMethod(resume.methods.getEducationCount().call()));\r\n        countReq.push(this.providerSvc.executeMethod(resume.methods.getExperienceCount().call()));\r\n        countReq.push(this.providerSvc.executeMethod(resume.methods.getSkillCount().call()));\r\n\r\n        forkJoin(countReq).pipe(\r\n            switchMap(res => {\r\n                this.profile.setCounts(res);\r\n                return this.profile.setEducations();\r\n            }),\r\n            switchMap(() => this.profile.setExperiences()),\r\n            switchMap(() => this.profile.setSkills()),\r\n            take(1)\r\n        ).subscribe(() => {\r\n            this.dealSkills();\r\n            this.loaded = true;\r\n        });\r\n    }\r\n\r\n    private dealSkills(): void {\r\n        const skills = this.profile.skills.items;\r\n        const classBuffer = skills.map(x => x.class);\r\n        const noRepeatClass = classBuffer.filter((val, i, arr) => arr.indexOf(val) === i);\r\n        const sk = [];\r\n        noRepeatClass.forEach(key => {\r\n          sk.push({\r\n              class: key,\r\n              items: skills.filter(x => x.class === key).map(x => x.name)\r\n          });\r\n        });\r\n        this.skills = sk;\r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { HomeRoutingModule } from './home-routing.module';\r\nimport { HomeComponent } from './home.component';\r\n\r\n@NgModule({\r\n  declarations: [HomeComponent],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    HomeRoutingModule\r\n  ]\r\n})\r\nexport class HomeModule { }\r\n"],"sourceRoot":""}